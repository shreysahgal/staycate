<!doctype html>

<html lang="en">
<head>
    <meta charset="utf-8">

    <title>test</title>
    <style>
        #mapid { 
            position: absolute;
            height: 100%;
            width: 100%; 
        }

        #result {
            padding: 10px;
            font-size: 2em;
            color: blue;
        }
    </style>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.6.0/dist/leaflet.css"
    integrity="sha512-xwE/Az9zrjBIphAcBb3F6JVqxf46+CDLwfLMHloNu6KEQCAWi6HcDUbeOfBIptF7tcCzusKFjFw2yuvEpDL9wQ=="
    crossorigin=""/>
  
    <script src="https://unpkg.com/leaflet@1.6.0/dist/leaflet.js"
    integrity="sha512-gZwIG9x3wUXg2hdXF6+rVkLF/0Vi9U8D2Ntg4Ga5I5BZpVkVxlJWbSQtXPSiUTtC0TjtGOmxa1AJPuV0CPthew=="
    crossorigin=""></script>    
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCp_HUtO07Z1y5bCAIuk-7F6zfaJ0jHFKs&libraries=places"></script>
</head>

<body>
    <div id="mapid"></div>
    

    <input type="text" value="-73.945462,40.830182" id="lonlat" />
    <button id="go" onclick="geocode();">Geocode</button>
    <div id="result"></div>

    <script>
        var googleAPI = "AIzaSyCp_HUtO07Z1y5bCAIuk-7F6zfaJ0jHFKs";
        var base = '/nearbyplaces?'
        var radius = "1500";

        function getPOIs() {
            // var latlongformatted = latlong.lat + "," + latlong.lng;
            var latlongformatted = "40.803199,-73.945298"
            var type = "restaurant";
            var url = base + "location=" + latlongformatted + "&radius=" + radius + "&type=" + type;
            // url = 'https://maps.googleapis.com/maps/api/place/nearbysearch/json?location=40.803199,-73.945298&radius=1500&type=restaurant&key=AIzaSyCp_HUtO07Z1y5bCAIuk-7F6zfaJ0jHFKs';
            $.ajax({
                type: 'GET',
                url: url,
                success: function(response) {
                    console.log(response);
                },
                error: function(response) {
                    console.log("Google call error");
                }
            });
        }

        getPOIs();
    </script>
</body>
</html>
